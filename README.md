# SEDåˆ†æAPI ã‚·ã‚¹ãƒ†ãƒ  v2.0 - Supabaseçµ±åˆç‰ˆ

éŸ³éŸ¿ã‚¤ãƒ™ãƒ³ãƒˆæ¤œå‡ºï¼ˆSEDï¼‰ãƒ‡ãƒ¼ã‚¿ã®åé›†ãƒ»é›†è¨ˆã‚’Supabaseãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã§è¡Œã†FastAPIãƒ™ãƒ¼ã‚¹ã®REST APIã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

**ğŸš€ v2.0ã®ä¸»è¦å¤‰æ›´ç‚¹:**
- âœ… **å®Œå…¨Supabaseçµ±åˆ**: JSONãƒ•ã‚¡ã‚¤ãƒ« â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç›´æ¥é€£æº
- âœ… **åŠ¹ç‡åŒ–ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿æ§‹é€ **: æ§‹é€ åŒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå½¢å¼
- âœ… **ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«å»ƒæ­¢**: ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- âœ… **ãƒã‚¤ã‚ºé™¤å»æ©Ÿèƒ½**: èª¤æ¤œå‡ºã®å¤šã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’è‡ªå‹•é™¤å¤–

**ğŸŒ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ:**
- **ãƒ‡ãƒ¼ã‚¿å–å¾—**: Supabase `behavior_yamnet` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆç¾åœ¨ã¯ASTçµæœã‚’æ ¼ç´ï¼‰ã‹ã‚‰ç›´æ¥å–å¾—
- **ãƒ‡ãƒ¼ã‚¿é›†è¨ˆ**: éŸ³éŸ¿ã‚¤ãƒ™ãƒ³ãƒˆã®è‡ªå‹•é›†è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”Ÿæˆ
- **ãƒ‡ãƒ¼ã‚¿ä¿å­˜**: Supabase `behavior_summary` ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç›´æ¥ä¿å­˜
- **APIæä¾›**: FastAPIã«ã‚ˆã‚‹REST API

## ğŸ“Š é›†è¨ˆå‡¦ç†ã®ä»•æ§˜

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. **ãƒ‡ãƒ¼ã‚¿å–å¾—**: behavior_yamnetãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æŒ‡å®šdevice_idãƒ»æ—¥ä»˜ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
2. **ã‚¤ãƒ™ãƒ³ãƒˆæŠ½å‡º**: å„time_blockï¼ˆ30åˆ†ã‚¹ãƒ­ãƒƒãƒˆï¼‰ã®eventsã‹ã‚‰ãƒ©ãƒ™ãƒ«ã‚’æŠ½å‡º
3. **ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: é™¤å¤–ãƒªã‚¹ãƒˆã«åŸºã¥ã„ã¦ãƒã‚¤ã‚ºã‚¤ãƒ™ãƒ³ãƒˆã‚’é™¤å»
4. **é›†è¨ˆ**: Counterï¼ˆå‡ºç¾å›æ•°ã‚«ã‚¦ãƒ³ãƒˆï¼‰ã§é›†è¨ˆ
5. **ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”Ÿæˆ**: ä¸Šä½10ä»¶ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä½œæˆ
6. **ç¿»è¨³**: æœ€å¾Œã«æ—¥æœ¬èªã«ç¿»è¨³ã—ã¦ä¿å­˜

### âš ï¸ é‡è¦ãªä»•æ§˜
- **ç¢ºç‡ï¼ˆscore/probï¼‰ã®ã—ãã„å€¤å‡¦ç†ã¯ç¾åœ¨æœªå®Ÿè£…**
  - ã™ã¹ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒç¢ºç‡ã«é–¢ä¿‚ãªãã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹
  - 0.001ã®ç¢ºç‡ã§ã‚‚1.0ã®ç¢ºç‡ã§ã‚‚åŒã˜1å›ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
  - ä»Šå¾Œã€ç¢ºç‡ã—ãã„å€¤ã®å®Ÿè£…ã‚’æ¤œè¨ä¸­

### ãƒ‡ãƒ¼ã‚¿å½¢å¼
ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®2ã¤ã®å½¢å¼ã«å¯¾å¿œï¼š
- **æ–°å½¢å¼ï¼ˆASTï¼‰**: `{"time": 0.0, "events": [{"label": "Speech", "score": 0.85}, ...]}`
- **æ—§å½¢å¼ï¼ˆYAMNetï¼‰**: `{"label": "Speech", "prob": 0.85}`

## ğŸš« é™¤å¤–ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆ

ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’è‡ªå‹•çš„ã«é›†è¨ˆã‹ã‚‰é™¤å¤–ã—ã¾ã™ï¼ˆèª¤æ¤œå‡ºã‚„ãƒã‚¤ã‚ºã‚’æ¸›ã‚‰ã™ãŸã‚ï¼‰ï¼š

### ç¾åœ¨ã®é™¤å¤–ãƒªã‚¹ãƒˆ
```python
EXCLUDED_EVENTS = [
    'Snake',       # ãƒ˜ãƒ“ - é€šå¸¸ã®ç”Ÿæ´»ç’°å¢ƒã§ã¯è€ƒãˆã«ãã„
    'Insect',      # æ˜†è™« - èª¤æ¤œå‡ºãŒå¤šã„
    'Cricket',     # ã‚³ã‚ªãƒ­ã‚® - èª¤æ¤œå‡ºãŒå¤šã„
    'White noise', # ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚º - ç„¡æ„å‘³ãªç’°å¢ƒãƒã‚¤ã‚º
    'Mains hum',   # é›»æºãƒãƒ éŸ³ - é›»æ°”çš„ãƒã‚¤ã‚ºï¼ˆ50/60Hzï¼‰
    'Mouse',       # ãƒã‚¦ã‚¹ - èª¤æ¤œå‡ºãŒå¤šã„ãƒã‚¤ã‚º
]
```

### é™¤å¤–ã®ä»•çµ„ã¿
- âœ… **ç”Ÿãƒ‡ãƒ¼ã‚¿ä¿å­˜**: behavior_yamnetãƒ†ãƒ¼ãƒ–ãƒ«ã«ã¯å…¨ã‚¤ãƒ™ãƒ³ãƒˆãŒä¿å­˜ã•ã‚Œã‚‹
- âŒ **é›†è¨ˆé™¤å¤–**: é›†è¨ˆãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ã¯å«ã¾ã‚Œãªã„
- âŒ **è¡¨ç¤ºé™¤å¤–**: iOSã‚¢ãƒ—ãƒªã®è¡Œå‹•ã‚°ãƒ©ãƒ•ã«ã¯è¡¨ç¤ºã•ã‚Œãªã„
- âŒ **ã‚«ã‚¦ãƒ³ãƒˆé™¤å¤–**: behavior_summaryãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ã‚¦ãƒ³ãƒˆã«ã¯åæ˜ ã•ã‚Œãªã„

é™¤å¤–ãƒªã‚¹ãƒˆã¯`sed_aggregator.py`ã®`EXCLUDED_EVENTS`ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚ˆãã‚ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã®èª¬æ˜
- **Hum**: ãƒ–ãƒ¼ãƒ³éŸ³ãƒ»ä½å‘¨æ³¢ãƒã‚¤ã‚ºï¼ˆã‚¨ã‚¢ã‚³ãƒ³ã€å†·è”µåº«ãªã©ã®æŒç¶šçš„ãªä½éŸ³ï¼‰
- **Mains hum**: é›»æºãƒãƒ éŸ³ï¼ˆ50/60Hzã®é›»æ°—çš„ãƒã‚¤ã‚ºï¼‰
- **Outside, rural or natural**: å±‹å¤–ï¼ˆç”°èˆãƒ»è‡ªç„¶ï¼‰ã®ç’°å¢ƒéŸ³åˆ†é¡
- **White noise**: ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚ºï¼ˆå…¨å‘¨æ³¢æ•°å¸¯åŸŸã®å‡ç­‰ãªé›‘éŸ³ï¼‰

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

### behavior_yamnet ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã€ç¾åœ¨ã¯ASTçµæœã‚’æ ¼ç´ï¼‰
```sql
CREATE TABLE behavior_yamnet (
  device_id     text NOT NULL,
  date          date NOT NULL,
  time_block    text NOT NULL CHECK (time_block ~ '^[0-2][0-9]-[0-5][0-9]$'),
  events        jsonb NOT NULL,
  PRIMARY KEY (device_id, date, time_block)
);
```

**eventsã‚«ãƒ©ãƒ ã®æ§‹é€ :**
```json
[
  {"label": "Speech", "prob": 0.98},
  {"label": "Silence", "prob": 1.0},
  {"label": "Inside, small room", "prob": 0.31}
]
```

### behavior_summary ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆé›†è¨ˆçµæœä¿å­˜å…ˆï¼‰
```sql
CREATE TABLE behavior_summary (
  device_id       text NOT NULL,
  date            date NOT NULL,
  summary_ranking jsonb NOT NULL,  -- å…¨ä½“ãƒ©ãƒ³ã‚­ãƒ³ã‚°
  time_blocks     jsonb NOT NULL,  -- ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ã®å‡ºç¾æ•°
  PRIMARY KEY (device_id, date)
);
```

**summary_rankingã®æ§‹é€ :**
```json
[
  {"event": "Speech", "count": 42},
  {"event": "Silence", "count": 38},
  {"event": "Music", "count": 25},
  {"event": "Typing", "count": 20},
  {"event": "Laughter", "count": 15}
]
```
ï¼ˆæœ€å¤§10ä»¶ã¾ã§è¡¨ç¤ºï¼‰

**time_blocksã®æ§‹é€ :**
```json
{
  "00-00": [
    {"event": "Speech", "count": 3},
    {"event": "Silence", "count": 2}
  ],
  "00-30": null,
  "01-00": [
    {"event": "Music", "count": 1}
  ]
}
```

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

**ğŸ Pythonç’°å¢ƒ:**
- Python 3.11.8ä»¥ä¸Š
- FastAPI + Uvicornï¼ˆAPIã‚µãƒ¼ãƒãƒ¼ï¼‰
- Supabase Python ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- python-dotenvï¼ˆç’°å¢ƒå¤‰æ•°ç®¡ç†ï¼‰

**ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹:**
- Supabase ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- behavior_yamnetã€behavior_summary ãƒ†ãƒ¼ãƒ–ãƒ«

**ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ:**
```
api_sed-aggregator_v1/
â”œâ”€â”€ api_server.py              # ãƒ¡ã‚¤ãƒ³APIã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ sed_aggregator.py          # Supabaseçµ±åˆãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”œâ”€â”€ upload_sed_summary.py      # ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ï¼‰
â”œâ”€â”€ test_supabase.py          # ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ .env                      # Supabaseèªè¨¼æƒ…å ±
â”œâ”€â”€ requirements.txt          # ä¾å­˜é–¢ä¿‚
â””â”€â”€ README.md                # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1ï¸âƒ£ ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
pip install -r requirements.txt
```

### 2ï¸âƒ£ ç’°å¢ƒå¤‰æ•°è¨­å®š
`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦Supabaseèªè¨¼æƒ…å ±ã‚’è¨­å®š:
```env
SUPABASE_URL=https://qvtlwotzuzbavrzqhyvt.supabase.co
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 3ï¸âƒ£ APIã‚µãƒ¼ãƒãƒ¼èµ·å‹•
```bash
# é–‹ç™ºç’°å¢ƒï¼ˆæ¨å¥¨ï¼‰
python api_server.py

# ã¾ãŸã¯
uvicorn api_server:app --reload --host 0.0.0.0 --port 8010
```

APIã‚µãƒ¼ãƒãƒ¼ã¯ `http://localhost:8010` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 4ï¸âƒ£ æ¥ç¶šç¢ºèª
```bash
curl http://localhost:8010/health
```

## ğŸŒ æ—¥æœ¬èªç¿»è¨³ãƒãƒƒãƒ”ãƒ³ã‚°

### ç¿»è¨³ã®ä»•çµ„ã¿
- **AUDIOSET_LABEL_MAP**: 527ç¨®é¡ã®AudioSetãƒ©ãƒ™ãƒ«ã®æ—¥æœ¬èªè¨³ã‚’å®šç¾©
- é›†è¨ˆã®æœ€çµ‚æ®µéšã§è‹±èªãƒ©ãƒ™ãƒ«ã‚’æ—¥æœ¬èªã«ç¿»è¨³
- ãƒãƒƒãƒ”ãƒ³ã‚°ã«ãªã„ãƒ©ãƒ™ãƒ«ã¯å…ƒã®è‹±èªã®ã¾ã¾è¡¨ç¤º

### æœ€è¿‘è¿½åŠ ã•ã‚ŒãŸç¿»è¨³
- **Hum**: 'ä½å‘¨æ³¢ãƒã‚¤ã‚º'ï¼ˆ2025å¹´9æœˆ26æ—¥æ›´æ–°ï¼‰

### æœªç¿»è¨³ã®ãƒ©ãƒ™ãƒ«ã«ã¤ã„ã¦
ãƒãƒƒãƒ”ãƒ³ã‚°ã«å­˜åœ¨ã—ãªã„ãƒ©ãƒ™ãƒ«ã¯è‹±èªã®ã¾ã¾è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ–°ã—ã„ãƒ©ãƒ™ãƒ«ã‚’ç™ºè¦‹ã—ãŸå ´åˆã¯ã€`AUDIOSET_LABEL_MAP`ã«ç¿»è¨³ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

## ğŸ”„ 2025å¹´9æœˆ20æ—¥ã®å¤‰æ›´å±¥æ­´

### å®Ÿæ–½ã—ãŸä¿®æ­£
1. **YAMNetâ†’ASTç§»è¡Œã®åæ˜ **
   - ã‚³ãƒ¡ãƒ³ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ï¼ˆå®Ÿéš›ã®ãƒ¢ãƒ‡ãƒ«ã¯ASTã‚’ä½¿ç”¨ï¼‰
   - å¤‰æ•°åã‚’`YAMNET_LABEL_MAP`ã‹ã‚‰`AUDIOSET_LABEL_MAP`ã«å¤‰æ›´
   - ãƒ†ãƒ¼ãƒ–ãƒ«åã¯äº’æ›æ€§ã®ãŸã‚å¤‰æ›´ã›ãš

2. **é™¤å¤–ãƒªã‚¹ãƒˆã®å®Ÿè£…**
   - ãƒã‚¤ã‚ºã‚„èª¤æ¤œå‡ºã®å¤šã„ã‚¤ãƒ™ãƒ³ãƒˆã‚’è‡ªå‹•é™¤å¤–ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ 
   - `EXCLUDED_EVENTS`ãƒªã‚¹ãƒˆã§ç®¡ç†
   - Snakeã€Insectã€Cricketã€White noiseã€Mains humã€Mouseã®6ã¤ã‚’é™¤å¤–

3. **ç¿»è¨³ãƒãƒƒãƒ”ãƒ³ã‚°ã®è¿½åŠ **
   - 'Hum'ã®æ—¥æœ¬èªè¨³ã‚’è¿½åŠ 

### ä»Šå¾Œã®æ”¹å–„äºˆå®š
- ç¢ºç‡ã—ãã„å€¤ã®å®Ÿè£…ï¼ˆä¾‹ï¼šscore > 0.1ã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿ã‚«ã‚¦ãƒ³ãƒˆï¼‰
- é™¤å¤–ãƒªã‚¹ãƒˆã®æ‹¡å……
- ç¿»è¨³ãƒãƒƒãƒ”ãƒ³ã‚°ã®å®Œå…¨åŒ–

### 2025å¹´9æœˆ26æ—¥ã®å¤‰æ›´å±¥æ­´

#### ãƒ©ãƒ³ã‚­ãƒ³ã‚°ä»•æ§˜ã®æ”¹å–„
1. **ã€Œãã®ä»–ã€é›†è¨ˆã®å»ƒæ­¢**
   - ä¸Šä½ã«ã€Œãã®ä»–ã€ãŒæ¥ã‚‹ã“ã¨ã§æ„å‘³ã®ãªã„ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«ãªã‚‹å•é¡Œã‚’è§£æ¶ˆ
   - å…·ä½“çš„ãªã‚¤ãƒ™ãƒ³ãƒˆåã®ã¿ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«å¤‰æ›´

2. **ãƒˆãƒƒãƒ—5â†’ãƒˆãƒƒãƒ—10ã¸ã®æ‹¡å¼µ**
   - ã‚ˆã‚Šå¤šãã®ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±ã‚’å¯è¦–åŒ–
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã®è©³ç´°ãªè¡Œå‹•åˆ†æãŒå¯èƒ½ã«

3. **é™¤å¤–ãƒªã‚¹ãƒˆã®æ›´æ–°**
   - 'Mouse'ã‚’é™¤å¤–ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼ˆèª¤æ¤œå‡ºãŒå¤šã„ãƒã‚¤ã‚ºï¼‰

4. **ç¿»è¨³ã®æ”¹å–„**
   - 'Hum'ã®ç¿»è¨³ã‚’ã€Œãƒ–ãƒ¼ãƒ³éŸ³ãƒ»ä½å‘¨æ³¢ãƒã‚¤ã‚ºã€ã‹ã‚‰ã€Œä½å‘¨æ³¢ãƒã‚¤ã‚ºã€ã«ç°¡ç´ åŒ–

## ğŸŒ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ğŸ“Š SEDåˆ†æAPI

#### **1. åˆ†æé–‹å§‹** `POST /analysis/sed`
**æ©Ÿèƒ½**: Supabaseã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»é›†è¨ˆãƒ»ä¿å­˜ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œ

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:**
```bash
POST /analysis/sed
Content-Type: application/json

{
  "device_id": "d067d407-cf73-4174-a9c1-d91fb60d64d0",
  "date": "2025-07-07"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆæˆåŠŸï¼‰:**
```json
{
  "task_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "started",
  "message": "d067d407-cf73-4174-a9c1-d91fb60d64d0/2025-07-07 ã®åˆ†æã‚’é–‹å§‹ã—ã¾ã—ãŸ"
}
```

#### **2. åˆ†æçŠ¶æ³ç¢ºèª** `GET /analysis/sed/{task_id}`
**æ©Ÿèƒ½**: ã‚¿ã‚¹ã‚¯ã®é€²æ—çŠ¶æ³ã¨çµæœã‚’å–å¾—

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆå®Œäº†ï¼‰:**
```json
{
  "task_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "completed",
  "message": "åˆ†æå®Œäº†",
  "progress": 100,
  "result": {
    "message": "ãƒ‡ãƒ¼ã‚¿ã¯Supabaseã®behavior_summaryãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸ",
    "device_id": "d067d407-cf73-4174-a9c1-d91fb60d64d0",
    "date": "2025-07-07"
  }
}
```

#### **3. å…¨ã‚¿ã‚¹ã‚¯ä¸€è¦§** `GET /analysis/sed`
**æ©Ÿèƒ½**: å®Ÿè¡Œä¸­ãƒ»å®Œäº†æ¸ˆã¿ã®å…¨ã‚¿ã‚¹ã‚¯ã‚’ä¸€è¦§è¡¨ç¤º

#### **4. ã‚¿ã‚¹ã‚¯å‰Šé™¤** `DELETE /analysis/sed/{task_id}`
**æ©Ÿèƒ½**: å®Œäº†ãƒ»å¤±æ•—ã—ãŸã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤

#### **5. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯** `GET /health` | `GET /`
**æ©Ÿèƒ½**: APIç¨¼åƒçŠ¶æ³ã®ç¢ºèª

## ğŸ’» ä½¿ç”¨ä¾‹

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å®Ÿè¡Œ
```bash
# ãƒ‡ãƒ¼ã‚¿é›†è¨ˆã®ç›´æ¥å®Ÿè¡Œ
python sed_aggregator.py d067d407-cf73-4174-a9c1-d91fb60d64d0 2025-07-07

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python test_supabase.py
```

### Python ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
```python
import requests

# æœ¬ç•ªç’°å¢ƒã§ã®åˆ†æé–‹å§‹
response = requests.post("https://api.hey-watch.me/behavior-aggregator/analysis/sed", json={
    "device_id": "d067d407-cf73-4174-a9c1-d91fb60d64d0",
    "date": "2025-07-15"
})

task_id = response.json()["task_id"]

# çµæœç¢ºèª
result = requests.get(f"https://api.hey-watch.me/behavior-aggregator/analysis/sed/{task_id}")
print(result.json())
```

### cURLä¾‹
```bash
# æœ¬ç•ªç’°å¢ƒã§ã®åˆ†æé–‹å§‹
TASK_ID=$(curl -s -X POST "https://api.hey-watch.me/behavior-aggregator/analysis/sed" \
  -H "Content-Type: application/json" \
  -d '{"device_id": "d067d407-cf73-4174-a9c1-d91fb60d64d0", "date": "2025-07-15"}' \
  | jq -r '.task_id')

# çµæœç¢ºèª
curl "https://api.hey-watch.me/behavior-aggregator/analysis/sed/$TASK_ID" | jq '.'

# é–‹ç™ºç’°å¢ƒã§ã®åˆ†æé–‹å§‹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
TASK_ID=$(curl -s -X POST "http://localhost:8010/analysis/sed" \
  -H "Content-Type: application/json" \
  -d '{"device_id": "d067d407-cf73-4174-a9c1-d91fb60d64d0", "date": "2025-07-15"}' \
  | jq -r '.task_id')
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

### é›†è¨ˆçµæœä¾‹ï¼ˆbehavior_summaryãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

```json
{
  "summary_ranking": [
    {"event": "Silence", "count": 7},
    {"event": "Speech", "count": 7},
    {"event": "Inside, small room", "count": 3},
    {"event": "Whack, thwack", "count": 2},
    {"event": "Arrow", "count": 2},
    {"event": "Music", "count": 2},
    {"event": "Click", "count": 1},
    {"event": "Typing", "count": 1},
    {"event": "Door", "count": 1},
    {"event": "Footsteps", "count": 1}
  ],
  "time_blocks": {
    "00-00": [
      {"event": "Sound effect", "count": 1},
      {"event": "Inside, small room", "count": 1},
      {"event": "Whack, thwack", "count": 1},
      {"event": "Explosion", "count": 1}
    ],
    "00-30": null,
    "09-00": [
      {"event": "Speech", "count": 1},
      {"event": "Animal", "count": 2}
    ],
    "18-30": [
      {"event": "Silence", "count": 1},
      {"event": "Speech", "count": 1}
    ]
  }
}
```

## ğŸ”§ æŠ€è¡“ä»•æ§˜

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
1. **ãƒ‡ãƒ¼ã‚¿å–å¾—**: Supabase `behavior_yamnet` ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰è©²å½“æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
2. **ãƒ‡ãƒ¼ã‚¿é›†è¨ˆ**: éŸ³éŸ¿ã‚¤ãƒ™ãƒ³ãƒˆãƒ©ãƒ™ãƒ«ã‚’æŠ½å‡ºãƒ»ã‚«ã‚¦ãƒ³ãƒˆ
3. **ç”Ÿæ´»éŸ³ãƒªã‚¹ãƒˆç”Ÿæˆ**: å„ªå…ˆé †ä½ã«åŸºã¥ã„ãŸ summary_ranking ã‚’ä½œæˆ
4. **æ™‚é–“åˆ¥é›†è¨ˆ**: 48ã‚¹ãƒ­ãƒƒãƒˆåˆ¥ã® time_blocks ã‚’ä½œæˆ
5. **ãƒ‡ãƒ¼ã‚¿ä¿å­˜**: Supabase `behavior_summary` ãƒ†ãƒ¼ãƒ–ãƒ«ã«UPSERT

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- **åŒæ™‚å‡¦ç†**: ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŠ¹ç‡**: å˜ä¸€ã‚¯ã‚¨ãƒªã§ã®ä¸€æ‹¬å–å¾—
- **ãƒ¡ãƒ¢ãƒªåŠ¹ç‡**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†ã¨ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼ã®è‡ªå‹•æ¤œå‡º
- ãƒ‡ãƒ¼ã‚¿ä¸æ•´åˆã®è‡ªå‹•å‡¦ç†
- è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›ã¨ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

**Supabaseæ¥ç¶šã‚¨ãƒ©ãƒ¼**
```
ValueError: SUPABASE_URLãŠã‚ˆã³SUPABASE_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“
```
â†’ `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®èªè¨¼æƒ…å ±ã‚’ç¢ºèª

**ãƒ‡ãƒ¼ã‚¿ãªã—ã‚¨ãƒ©ãƒ¼**
```
âš ï¸ å–å¾—ã§ããŸãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“
```
â†’ æŒ‡å®šã—ãŸdevice_id/dateã®ãƒ‡ãƒ¼ã‚¿ãŒbehavior_yamnetãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã™ã‚‹ã‹ç¢ºèª

**æ¨©é™ã‚¨ãƒ©ãƒ¼**
```
âŒ Supabaseä¿å­˜ã‚¨ãƒ©ãƒ¼: ...
```
â†’ Supabaseã‚­ãƒ¼ã®æ¨©é™ã¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®RLSãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª

## ğŸ†• v2.0ã®åˆ©ç‚¹

### å¾“æ¥ç‰ˆï¼ˆv1.0ï¼‰ã¨ã®æ¯”è¼ƒ
| é …ç›® | v1.0ï¼ˆJSONãƒ•ã‚¡ã‚¤ãƒ«ç‰ˆï¼‰ | v2.0ï¼ˆSupabaseçµ±åˆç‰ˆï¼‰ |
|------|----------------------|----------------------|
| ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | Vault API (HTTP) | Supabase (Database) |
| ä¿å­˜å…ˆ | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« | Supabaseãƒ†ãƒ¼ãƒ–ãƒ« |
| ãƒ‡ãƒ¼ã‚¿å½¢å¼ | æ–‡å­—åˆ—é…åˆ— | æ§‹é€ åŒ–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | 48ä¸¦åˆ—HTTP | å˜ä¸€DBæ¥ç¶š |
| ä¿¡é ¼æ€§ | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¾å­˜ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é«˜å¯ç”¨æ€§ |
| æ‹¡å¼µæ€§ | ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹åˆ¶é™ | SQLãƒ™ãƒ¼ã‚¹ç„¡åˆ¶é™ |

### ãƒ¡ãƒªãƒƒãƒˆ
- âœ… **é«˜é€ŸåŒ–**: ä¸¦åˆ—HTTP â†’ å˜ä¸€DBã‚¯ã‚¨ãƒª
- âœ… **ä¿¡é ¼æ€§å‘ä¸Š**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ  â†’ ãƒãƒãƒ¼ã‚¸ãƒ‰DB
- âœ… **æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿**: æ–‡å­—åˆ— â†’ JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
- âœ… **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: ç„¡åˆ¶é™ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- âœ… **çµ±åˆæ€§**: ä»–ã‚·ã‚¹ãƒ†ãƒ ã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹é€£æº

## ğŸš¢ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤

### ğŸ“ ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆæƒ…å ±
- **ã‚µãƒ¼ãƒãƒ¼**: AWS EC2 (3.24.16.82)
- **ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ URL**: http://3.24.16.82:8010
- **æœ¬ç•ª API URL**: https://api.hey-watch.me/behavior-aggregator/
- **APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: https://api.hey-watch.me/behavior-aggregator/docs
- **ã‚µãƒ¼ãƒ“ã‚¹å**: api-sed-aggregator

### ğŸ³ ECRã‚’ä½¿ç”¨ã—ãŸæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

#### 1. ECRã¸ã®ãƒ­ã‚°ã‚¤ãƒ³
```bash
# ã‚·ãƒ‰ãƒ‹ãƒ¼ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®ECRã«ãƒ­ã‚°ã‚¤ãƒ³
aws ecr get-login-password --region ap-southeast-2 | docker login --username AWS --password-stdin 754724220380.dkr.ecr.ap-southeast-2.amazonaws.com
```

#### 2. Docker imageã®ãƒ“ãƒ«ãƒ‰ã¨ãƒ—ãƒƒã‚·ãƒ¥
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰
docker build -t api-sed-aggregator:latest .

# ECRç”¨ã«ã‚¿ã‚°ä»˜ã‘
docker tag api-sed-aggregator:latest 754724220380.dkr.ecr.ap-southeast-2.amazonaws.com/watchme-api-sed-aggregator:latest

# ECRã«ãƒ—ãƒƒã‚·ãƒ¥
docker push 754724220380.dkr.ecr.ap-southeast-2.amazonaws.com/watchme-api-sed-aggregator:latest
```

#### 3. EC2ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆdocker-composeä½¿ç”¨ï¼‰
```bash
# EC2ã«SSHæ¥ç¶š
ssh -i ~/watchme-key.pem ubuntu@3.24.16.82

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /home/ubuntu/api-sed-aggregator

# æœ€æ–°ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ—ãƒ«
docker-compose -f docker-compose.prod.yml pull

# ã‚³ãƒ³ãƒ†ãƒŠã‚’å†èµ·å‹•
docker-compose -f docker-compose.prod.yml up -d

# ãƒ­ã‚°ç¢ºèª
docker-compose -f docker-compose.prod.yml logs -f
```

### ğŸ”§ systemdã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†

#### ã‚µãƒ¼ãƒ“ã‚¹ã®çŠ¶æ…‹ç¢ºèª
```bash
sudo systemctl status api-sed-aggregator
```

#### ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ¶å¾¡
```bash
# èµ·å‹•
sudo systemctl start api-sed-aggregator

# åœæ­¢
sudo systemctl stop api-sed-aggregator

# å†èµ·å‹•
sudo systemctl restart api-sed-aggregator

# ãƒ­ã‚°ç¢ºèªï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
sudo journalctl -u api-sed-aggregator -f
```

### ğŸ†• ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ‰‹é †
```bash
# 1. æ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
docker build -t api-sed-aggregator:latest .

# 2. ECRã«ãƒ—ãƒƒã‚·ãƒ¥
docker tag api-sed-aggregator:latest 754724220380.dkr.ecr.ap-southeast-2.amazonaws.com/watchme-api-sed-aggregator:latest
docker push 754724220380.dkr.ecr.ap-southeast-2.amazonaws.com/watchme-api-sed-aggregator:latest

# 3. EC2ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
ssh -i ~/watchme-key.pem ubuntu@3.24.16.82
cd /home/ubuntu/api-sed-aggregator
docker-compose -f docker-compose.prod.yml pull
docker-compose -f docker-compose.prod.yml up -d
```

### ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ãªã„å ´åˆ
```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã®ç¢ºèª
sudo journalctl -xeu api-sed-aggregator.service -n 50

# Dockerã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ç¢ºèª
docker ps -a | grep api-sed-aggregator

# æ‰‹å‹•ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
docker run --rm --name api-sed-aggregator-test -p 8010:8010 --env-file .env api-sed-aggregator:latest
```

#### ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ
```bash
# ãƒãƒ¼ãƒˆä½¿ç”¨çŠ¶æ³ã®ç¢ºèª
sudo lsof -i :8010

# åˆ¥ã®ã‚³ãƒ³ãƒ†ãƒŠãŒä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ
docker ps | grep 8010
docker stop <CONTAINER_ID>
```

#### ç’°å¢ƒå¤‰æ•°ã®å•é¡Œ
```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
cat ~/.env

# ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
docker exec api-sed-aggregator env | grep SUPABASE
```

#### ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•
```bash
# systemdãƒ­ã‚°
sudo journalctl -u api-sed-aggregator --since "10 minutes ago"

# Dockerãƒ­ã‚°
docker logs api-sed-aggregator --tail 100

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ï¼ˆè©³ç´°ï¼‰
docker logs api-sed-aggregator 2>&1 | grep -E "(ERROR|WARNING|âŒ)"
```

### ğŸ“Š ç›£è¦–ã¨ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

#### APIã®ç¨¼åƒç¢ºèª
```bash
# æœ¬ç•ªç’°å¢ƒï¼ˆæ¨å¥¨ï¼‰
curl https://api.hey-watch.me/behavior-aggregator/health

# ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆé–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
curl http://3.24.16.82:8010/health

# EC2å†…éƒ¨ã‹ã‚‰
curl http://localhost:8010/health
```

#### ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ç¢ºèª
```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨çŠ¶æ³
docker stats api-sed-aggregator

# ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒªã‚½ãƒ¼ã‚¹
htop
df -h
```

## ğŸ”„ æ›´æ–°å±¥æ­´

### v2.0.2 æ›´æ–°å†…å®¹ï¼ˆ2025å¹´7æœˆ15æ—¥ï¼‰

#### ğŸŒ æœ¬ç•ªç’°å¢ƒURLã®æ•´å‚™
1. **Nginx ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ã®è¨­å®š**
   - æœ¬ç•ªç’°å¢ƒURL: `https://api.hey-watch.me/behavior-aggregator/`
   - SSL/TLSè¨¼æ˜æ›¸ã«ã‚ˆã‚‹å®‰å…¨ãªé€šä¿¡
   - CORSè¨­å®šã«ã‚ˆã‚‹å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œ

2. **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®çµ±ä¸€**
   - æœ¬ç•ªç’°å¢ƒã§ã®çµ±ä¸€ã•ã‚ŒãŸAPIã‚¢ã‚¯ã‚»ã‚¹
   - ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹URL: `http://3.24.16.82:8010`ï¼ˆé–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: `https://api.hey-watch.me/behavior-aggregator/docs`

3. **é‹ç”¨å®Ÿç¸¾ã®ç¢ºèª**
   - device_id: `d067d407-cf73-4174-a9c1-d91fb60d64d0`
   - 2025-07-15 ãƒ‡ãƒ¼ã‚¿ã®æ­£å¸¸å‡¦ç†ã‚’ç¢ºèª
   - Supabaseã¸ã®ä¿å­˜æ­£å¸¸å‹•ä½œã‚’ç¢ºèª

### v2.0.1 æ›´æ–°å†…å®¹ï¼ˆ2025å¹´7æœˆï¼‰

#### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å†…å®¹
1. **ä¸è¦ãªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã®å‰Šé™¤**
   - `upload_sed_summary.py`ã¸ã®ä¾å­˜ã‚’å‰Šé™¤
   - ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å¤ã„å‡¦ç†ã‚’å®Œå…¨ã«é™¤å»
   - `VERIFY_SSL`ç’°å¢ƒå¤‰æ•°ã®å‰Šé™¤

2. **å‡¦ç†ãƒ•ãƒ­ãƒ¼ã®ç°¡ç´ åŒ–**
   - Supabaseã¸ã®ç›´æ¥ä¿å­˜ã®ã¿ã«çµ±ä¸€
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„
   - ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¡¨ç¤ºã®èª¿æ•´ï¼ˆ25% â†’ 50%ï¼‰

3. **æœ¬ç•ªç’°å¢ƒã®æ•´å‚™**
   - systemdã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦è¨­å®š
   - è‡ªå‹•èµ·å‹•ãƒ»è‡ªå‹•å†èµ·å‹•ã®è¨­å®š
   - Dockerã‚³ãƒ³ãƒ†ãƒŠã§ã®å®‰å®šç¨¼åƒ

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
- ä¸è¦ãªå‡¦ç†ã®å‰Šé™¤ã«ã‚ˆã‚Šå‡¦ç†æ™‚é–“ãŒçŸ­ç¸®
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®å‰Šæ¸›
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç®‡æ‰€ã®å‰Šæ¸›

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

**APIä»•æ§˜ã®è©³ç´°:**
- æœ¬ç•ªç’°å¢ƒ Swagger UI: `https://api.hey-watch.me/behavior-aggregator/docs`
- ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ Swagger UI: `http://3.24.16.82:8010/docs`  
- é–‹ç™ºç’°å¢ƒ Swagger UI: `http://localhost:8010/docs`

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ:**
- behavior_yamnet: éŸ³éŸ¿ã‚¤ãƒ™ãƒ³ãƒˆç”Ÿãƒ‡ãƒ¼ã‚¿
- behavior_summary: é›†è¨ˆæ¸ˆã¿ã‚µãƒãƒªãƒ¼ãƒ‡ãƒ¼ã‚¿

**é–‹ç™ºè€…å‘ã‘ã‚µãƒãƒ¼ãƒˆ:**
- Supabaseçµ±åˆãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- éåŒæœŸå‡¦ç†ã®å®Ÿè£…ã‚¬ã‚¤ãƒ‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–æ‰‹æ³•
- systemd/Dockerã§ã®æœ¬ç•ªé‹ç”¨